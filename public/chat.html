<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>VoltronChat</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- üîπ –õ–æ–≥–æ -->
  <div class="logo-block">
    <img src="/images/logo.png" alt="Chat Logo" class="logo-img" />
  </div>

  <!-- üîπ –ú–æ–±–∏–ª—å–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏ -->
  <div class="mobile-tabs">
    <button class="tab" data-screen="online" title="–û–Ω–ª–∞–π–Ω">üü¢</button>
    <button class="tab" data-screen="chat" title="–û–±—â–∏–π —á–∞—Ç">üí¨</button>
    <button class="tab" data-screen="private" title="–õ–∏—á–∫–∞">‚úâÔ∏è</button>
  </div>

  <!-- üîπ –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
  <div class="chat-container">
    <!-- üü¢ –û–Ω–ª–∞–π–Ω -->
    <div class="sidebar-left screen" id="screen-online">
      <div class="column-headers">
        <div class="column-title">–û–Ω–ª–∞–π–Ω</div>
        <form action="/logout" method="POST">
          <button id="exit-button">–í—ã–π—Ç–∏</button>
        </form>
      </div>
      <ul id="online-users-desktop"></ul>
      <ul id="online-users-mobile" style="display:none"></ul>
    </div>

    <!-- üí¨ –û–±—â–∏–π —á–∞—Ç -->
    <div class="chat-center screen" id="screen-chat">
      <div class="column-headers">
        <div class="column-title">–û–±—â–∏–π —á–∞—Ç</div>
      </div>
      <div id="chat-history-desktop"></div>
    </div>

    <!-- ‚úâÔ∏è –õ–∏—á–∫–∞ -->
    <div class="sidebar-right screen" id="screen-private">
      <div class="column-headers">
        <div class="column-title">–õ–∏—á–∫–∞</div>
      </div>
      <div id="private-history-desktop"></div>
    </div>
  </div>

  <!-- üîî –ê—É–¥–∏–æ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
  <audio id="notif" src="/notif.mp3" preload="auto"></audio>

  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Socket.IO –∏ chat.js -->
  <script src="/socket.io/socket.io.js"></script>
  <script src="chat.js"></script>
  <script>
// –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ Enter –¥–ª—è –æ–±—â–µ–≥–æ —á–∞—Ç–∞
const chatInput = document.getElementById('chat-input-desktop');
const chatSend = document.getElementById('chat-send-desktop');
if (chatInput && chatSend) {
  chatInput.addEventListener('keydown', function(e) {
    if (e.key === 'Enter') {
      chatSend.click();
      e.preventDefault();
    }
  });
}
// –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ Enter –¥–ª—è –ª–∏—á–∫–∏
const privateInput = document.getElementById('private-input-desktop');
const privateSend = document.getElementById('private-send-desktop');
if (privateInput && privateSend) {
  privateInput.addEventListener('keydown', function(e) {
    if (e.key === 'Enter') {
      privateSend.click();
      e.preventDefault();
    }
  });
}
// –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ Enter –¥–ª—è —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤–≤–æ–¥–∞
const unifiedInput = document.getElementById('unified-input');
const chatSendButton = document.getElementById('chat-send');
const privateSendButton = document.getElementById('private-send');
if (unifiedInput && chatSendButton && privateSendButton) {
  unifiedInput.addEventListener('keydown', function(e) {
    if (e.key === 'Enter') {
      if (document.querySelector('.screen:target') === document.getElementById('screen-chat')) {
        chatSendButton.click();
      } else if (document.querySelector('.screen:target') === document.getElementById('screen-private')) {
        privateSendButton.click();
      }
      e.preventDefault();
    }
  });
}
</script>
</body>
</html>